<h2>Game Rules</h2>

<h3>ゲームの概要</h3>
<p>あなたはプレイボーイ。女の子たちとデートして好感度を上げよう。
ライバルたちを出し抜いて、女の子たちのハートをキャッチせよ！</p>

<h3>ルールの疑似コード</h3>
<p>自然言語よりコードをご希望の方に向けて、<a href="#PseudoCode">ルールの疑似コード</a>を用意した。</p>

<h3>ゲームの目的</h3>
<p><em>女の子</em> の <em>好感度</em> によって決まる <em>人気点</em> を、他の <em>プレイヤー</em> より多く獲得する。</p>

<h3>ゲームの大まかな流れ</h3>
<p>プレイヤーは4人、女の子は8人いる。</p>
<p>このゲームはターン制であり、各ターンごとに、プレイヤーたちは好きな女の子と <em>デート</em> して好感度をためる。
デートの情報は一部が隠されているため、他のプレイヤーとの駆け引きが重要となる。</p>
<p>10ターンでゲームが終了し、プレイヤーたちはそれぞれの女の子の好感度に応じて人気点を獲得する。
女の子の好感度が最も高いプレイヤーはその女の子から人気点をもらえるが、好感度が最も低いプレイヤーは人気点を失ってしまう。
したがって、目当ての女の子とは積極的にデートして他プレイヤーより多くの好感度をためつつ、他の女の子の好感度にも気を使って失点を防ぐことが重要である。
人気点を最も多く獲得したプレイヤーの勝利となる。</p>

<h3>ゲームの開始</h3>
<p>ゲームが開始すると、まずそれぞれの女の子に <em>熱狂度</em> が3から6の間でランダムに設定され、プレイヤーに公開される。
熱狂度が高い女の子ほど、ゲーム終了時にもらえる（または失う）人気点が多くなる。</p>

<h3>ターンの流れ</h3>
<p>ターンには <em>平日</em> ターンと <em>休日</em> ターンが存在する。
1ターン目は平日であり、1ターンごとに平日と休日が入れ替わる。
つまり、2ターンで一週間となる。</p>
<p>ターンが始まると、プレイヤーたちは一斉にデート相手を選ぶ。
平日では1ターンで5回（5日分）デートをするが、休日では1ターンに2回（2日分）デートする。
1回のデートでは1人の相手とデートをし、デートした相手の自分への好感度が1上がる。
ただし、休日は1回のデートにつき好感度が2上がる。
1ターン中のデート相手の割り振りは自由である。
例えば平日であれば、バラバラの5人と1回ずつデートしても良いし、同じ相手と5回デートしても良い。
なお、デート相手が他のプレイヤーと被っても、好感度はそれぞれ通常通り上昇する。</p>
<p>全プレイヤーがデート相手を選んだら、女の子たちの好感度が計算される。
そのターンが平日なら、誰が誰とデートしたか全員に公開される。
休日の場合は、どの女の子がデートを1回以上したかのみ公開される。</p>
<p>下の表は、平日と休日のデートの特徴をまとめたものである。</p>

<table border>
  <thead>
    <tr>
      <th></th>
      <th>平日</th>
      <th>休日</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>デート回数</td>
      <td>5</td>
      <td>2</td>
    </tr>
    <tr>
      <td>デート1回で上がる好感度</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <td>デート情報の公開</td>
      <td>全情報公開</td>
      <td>女の子のデートの有無のみ公開</td>
    </tr>
  </tbody>
</table>

<h3>ゲームの終了</h3>
<p>10ターン目が終わると、ゲームが終了し、人気点の計算に入る。</p>
<p>女の子からもらえる人気点は、その女の子の好感度を他のプレイヤーと比べて決められる。
その女の子からの好感度が全プレイヤー中で最も高い場合は、熱狂度と同じ点数を獲得する。
逆に全プレイヤー中で最も低い場合は、熱狂度と同じ点数を失う。
トップや最下位のプレイヤーが複数いる場合は、熱狂度をそれらのプレイヤーの人数で割った点だけ得点あるいは失点する。</p>
<p>各プレイヤーの人気点を全員の女の子に対して計算したら、最も人気点の高いプレイヤーが勝利する。
人気点トップのプレイヤーが複数いる場合は、そのゲームは引き分けとなる。</p>

<h3>AIの入出力形式</h3>
<p>AIはゲーム開始時に実行される。
ゲームを始める準備ができたら<code>READY</code>と出力したのち、ゲームの設定を入力として受け取る。
また、ターンごとに現在の情報を入力として受け取り、そのターンでのデート相手を出力する。</p>
<p>AIの思考時間には制限がある。
制限時間を超過するとAIプログラムが強制的に停止され、それ以降の行動が「全日程で0番の女の子とデートする」として処理される。</p>

<h4>準備完了メッセージの出力形式</h4>
<p>ゲームを開始する準備ができたら、<code>READY</code>と標準出力に出力する。
ゲーム開始から5秒以内に出力がなければ、AIプログラムが強制的に停止される。</p>

<h4>ゲーム設定の入力形式</h4>
<p>ゲーム開始時、つまり1ターン目の初めに、ゲームの設定が以下のフォーマットで標準入力に渡される。</p>
<p><pre>
T P H
E<sub>0</sub> E<sub>1</sub> E<sub>2</sub> ... E<sub>7</sub>
</pre></p>
<ul>
  <li>T: 全ターン数。</li>
  <li>P: プレイヤー数。</li>
  <li>H: 女の子の数。</li>
  <li>E<sub>n</sub>: 女の子nの熱狂度。</li>
</ul>

<h4>ターン情報の入力形式</h4>
<p>各ターンの初めに、現在の情報が以下のフォーマットで標準入力に渡される。</p>
<p><pre>
T D
L<sub>00</sub>　L<sub>01</sub> L<sub>02</sub> L<sub>03</sub>
L<sub>10</sub>　L<sub>11</sub> L<sub>12</sub> L<sub>13</sub>
L<sub>20</sub>　L<sub>21</sub> L<sub>22</sub> L<sub>23</sub>
:
:
L<sub>70</sub>　L<sub>71</sub> L<sub>72</sub> L<sub>73</sub>
R<sub>0</sub> R<sub>1</sub> R<sub>2</sub> ... R<sub>7</sub>
B<sub>0</sub> B<sub>1</sub> B<sub>2</sub> ... B<sub>7</sub>
</pre></p>
<ul>
  <li>T: 現在のターン数。1から始まる。</li>
  <li>D: 平日の場合は"W", 休日の場合は"H"。</li>
  <li>L<sub>nm</sub>: 女の子nからプレイヤーmへの公開されている（つまり平日の情報のみでわかる）好感度。このAIプレイヤー自身はプレイヤー0である。</li>
  <li>R<sub>n</sub>: 女の子nからこのAIプレイヤーへの真の（つまり休日も合わせた）好感度。</li>
  <li>B<sub>n</sub>: 女の子nが前日の休日にデートをした(1)かしていない(0)か。</li>
</ul>
<p>B<sub>0</sub> B<sub>1</sub> B<sub>2</sub> ... B<sub>7</sub>の行は、平日のターンでのみ含まれる。</p>

<h4>行動の出力形式</h4>
<p>そのターンでのデート相手は、以下のフォーマットで標準出力に出力する。</p>
<ul>
<li><p><strong>平日の場合</strong></p>
<p><pre>
H<sub>0</sub> H<sub>1</sub> H<sub>2</sub> H<sub>3</sub> H<sub>4</sub>
</pre></p>
</li>
<li><p><strong>休日の場合</strong></p>
<p><pre>
H<sub>0</sub> H<sub>1</sub>
</pre></p>
</li>
</ul>
<p>H<sub>n</sub>: デート相手の女の子の番号（0から7で指定）。H<sub>0</sub>からH<sub>4</sub>の順番は関係しない。</p>
<p>一度行動を出力すると、そのAIのターンは終了となる。
なお、ターン開始から1秒以内に出力がなければ、AIプログラムが強制的に停止される。</p>

<p><a name="PseudoCode"></a></p>
<h3>ルールの疑似コード</h3>
<pre><code>heroine = (enthusiasm, revealed_love[4], real_love[4])

main:
    init
    while turn &lt;= 10:
        process_turn
        turn += 1
    finish

init:
    players = player[4]
    heroines = heroine[8] (rand(3, 6), [0, 0, 0, 0], [0, 0, 0, 0])
    turn = 1

process_turn:
    for h in heroines:
        display_to_all_players(h.enthusiasm)
        display_to_all_players(h.revealed_love)
        if not is_holiday:
            display_to_all_players(h.dated)
        h.dated = false

    for p in players:
        for i in [1 .. (is_holiday ? 2 : 5)]:
            target = heroines[p.selected[i]]
            target.revealed_love[p] += (is_holiday ? 0 : 1)
            target.real_love[p] += (is_holiday ? 2 : 1)
            target.dated = true

is_holiday:
    turn % 2 == 0

finish:
    for h in heroines:
        best_players = players.max_by(p -&gt; h.real_love[p])
        for p in best_players:
            p.popularity += h.enthusiasm / best_players.size

        worst_players = players.min_by(p -&gt; h.real_love[p])
        for p in worst_players:
            p.popularity -= h.enthusiasm / worst_players.size

    winners = players.max_by(p -&gt; p.popularity)
    draw if winners.size &gt; 1
</code></pre>